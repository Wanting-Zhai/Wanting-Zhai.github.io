<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Wanting Zhai on Wanting Zhai</title>
    <link>/index.xml</link>
    <description>Recent content in Wanting Zhai on Wanting Zhai</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016 Your Name</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>February 28, 2017 - In-Class Project</title>
      <link>/post/february-28-2017-in-class-project/</link>
      <pubDate>Sun, 05 Mar 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/february-28-2017-in-class-project/</guid>
      <description>&lt;div id=&#34;part1&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;part1&lt;/h3&gt;
&lt;/div&gt;
&lt;div id=&#34;section&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;1&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ckm_nodes=read.csv(&amp;quot;ckm_nodes.csv&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-1&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table(ckm_nodes$adoption_date,exclude = NULL)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15 
##   11    9    9   11   11   11   13    7    4    1    5    3    3    4    4 
##   16   17  Inf &amp;lt;NA&amp;gt; 
##    2    1   16  121&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;16 doctors never prescribed tetracycline.&lt;/p&gt;
&lt;p&gt;121 doctor “NA”&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;section-2&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;3&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;index=which(!is.na(ckm_nodes$adoption_date))
length(index)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 125&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cleaned_nodes=ckm_nodes[c(index),]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-3&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;4&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;adopters=function(month,not.yet=FALSE){
  if (not.yet==FALSE){
    return(as.vector(cleaned_nodes$adoption_date==month))
  }
  else {
    return(as.vector(cleaned_nodes$adoption_date&amp;gt;month))
  }
}

adopters(month=14,not.yet=TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [12] FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [23] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
##  [34] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE
##  [45] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE
##  [56] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [67]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [78] FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE
##  [89]  TRUE FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE
## [100] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE
## [111] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [122] FALSE FALSE FALSE  TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sum(adopters(month=14,not.yet=TRUE))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 23&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-4&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;5&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;matrix=read.table(&amp;quot;ckm_network.dat&amp;quot;)
clean_network=matrix[index,index]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-5&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;6&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;contact=apply(clean_network,1,sum)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;part2&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Part2&lt;/h3&gt;
&lt;/div&gt;
&lt;div id=&#34;section-6&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;7&lt;/h3&gt;
&lt;/div&gt;
&lt;div id=&#34;a&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;a&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;count_peer_pressure=function(index,month){
  sum((cleaned_nodes[which(clean_network[index]==1),2]&amp;lt;=month))
}
count_peer_pressure(37,5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;b&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;b&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;prop_peer_pressure=function(index,month){
  if (count_peer_pressure(index,month)==0){
    return(NaN)
  } else{
    m=count_peer_pressure(index,month)
  m/length((cleaned_nodes[which(clean_network[index]==1),2]&amp;lt;=month))
  }
}

prop_peer_pressure(37,5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.6&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;prop_peer_pressure(102,14)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] NaN&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;section-7&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;8&lt;/h3&gt;
&lt;/div&gt;
&lt;div id=&#34;a-1&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;a&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;average_peer_pressure=function(month){
m1=which(adopters(month))
v1=vector(mode=&amp;quot;numeric&amp;quot;,length=length(m1))

 for (i in 1:length(m1)){
   v1[i]=prop_peer_pressure(m1[i],month)
 }
 mean1=mean(v1,na.rm=T)
 
 m2=which(adopters(month,not.yet=TRUE))
 v2=vector(mode=&amp;quot;numeric&amp;quot;,length=length(m2))
 for (i in 1:length(m2)){
   v2[i]=prop_peer_pressure(m2[i],month)
 }
mean2=mean(v2,na.rm=T)
 
return(c(mean1,mean2))
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;b-1&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;b&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;month=matrix(1:17,nrow = 17, ncol = 1)
result=apply(month,1,function(x) average_peer_pressure(x))
plot(result[1,1:17],type=&amp;quot;l&amp;quot;,ylab=&amp;quot;Proportion&amp;quot;)
lines(result[2,1:17],type=&amp;quot;l&amp;quot;,col=&amp;quot;red&amp;quot;)
legend(&amp;quot;bottomright&amp;quot;,c(&amp;quot;in that month&amp;quot;,&amp;quot;after that month&amp;quot;),lwd=1,col=c(1,2))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-03-05-february-28-2017-in-class-project_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;difference=result[1,1:17]-result[2,1:17]
plot(difference,type=&amp;quot;l&amp;quot;,ylab=&amp;quot;Proportion Difference&amp;quot;)
abline(h=0)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-03-05-february-28-2017-in-class-project_files/figure-html/unnamed-chunk-10-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Not necessary. Since proportion difference sometimes is less than 0 and sometimes is larger than 0.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>About</title>
      <link>/about/</link>
      <pubDate>Thu, 05 May 2016 21:48:51 -0700</pubDate>
      
      <guid>/about/</guid>
      <description>&lt;p&gt;This is a &amp;ldquo;hello world&amp;rdquo; example website for the &lt;a href=&#34;https://github.com/rstudio/blogdown&#34; target=&#34;_blank&#34;&gt;&lt;strong&gt;blogdown&lt;/strong&gt;&lt;/a&gt; package. The theme was forked from &lt;a href=&#34;https://github.com/jrutheiser/hugo-lithium-theme&#34; target=&#34;_blank&#34;&gt;@jrutheiser/hugo-lithium-theme&lt;/a&gt; and modified by &lt;a href=&#34;https://github.com/yihui/hugo-lithium-theme&#34; target=&#34;_blank&#34;&gt;Yihui Xie&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Hello R Markdown</title>
      <link>/post/2015-07-23-r-rmarkdown/</link>
      <pubDate>Thu, 23 Jul 2015 21:13:14 -0500</pubDate>
      
      <guid>/post/2015-07-23-r-rmarkdown/</guid>
      <description>&lt;div id=&#34;r-markdown&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;R Markdown&lt;/h1&gt;
&lt;p&gt;This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;a href=&#34;http://rmarkdown.rstudio.com&#34; class=&#34;uri&#34;&gt;http://rmarkdown.rstudio.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can embed an R code chunk like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(cars)
##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00
fit &amp;lt;- lm(dist ~ speed, data = cars)
fit
## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Coefficients:
## (Intercept)        speed  
##     -17.579        3.932&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;including-plots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Including Plots&lt;/h1&gt;
&lt;p&gt;You can also embed plots. See Figure &lt;a href=&#34;#fig:pie&#34;&gt;1&lt;/a&gt; for example:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&amp;#39;Sky&amp;#39;, &amp;#39;Sunny side of pyramid&amp;#39;, &amp;#39;Shady side of pyramid&amp;#39;),
  col = c(&amp;#39;#0292D8&amp;#39;, &amp;#39;#F7EA39&amp;#39;, &amp;#39;#C4B632&amp;#39;),
  init.angle = -50, border = NA
)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:pie&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2015-07-23-r-rmarkdown_files/figure-html/pie-1.png&#34; alt=&#34;A fancy pie chart.&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: A fancy pie chart.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
